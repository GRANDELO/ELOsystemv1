"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const stream_1 = require("stream");
const applyMixins_1 = require("../helpers/applyMixins");
const readable_1 = require("../readable");
const writable_1 = require("../writable");
class DuplexMock extends stream_1.Duplex {
    constructor(source, options = {}) {
        super(options);
        this.data = [];
        if (source) {
            this.it = source[Symbol.iterator]();
        }
        else if (this._readableState.objectMode === this._writableState.objectMode) {
            this.it = this.data[Symbol.iterator]();
        }
        else {
            throw new Error('Reader and writer should be either in full object mode or full buffer mode to be linked');
        }
    }
}
applyMixins_1.default(DuplexMock, [readable_1.ReadableMock, writable_1.WritableMock]);
exports.default = DuplexMock;
//# sourceMappingURL=DuplexMock.js.map